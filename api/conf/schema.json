{"plugins":{"forward-auth":{"schema":{"required":["uri"],"type":"object","properties":{"uri":{"type":"string"},"request_method":{"default":"GET","type":"string","enum":["GET","POST"],"description":"the method for client to request the authorization service"},"keepalive":{"default":true,"type":"boolean"},"upstream_headers":{"default":{},"type":"array","description":"authorization response header that will be sent to the upstream","items":{"type":"string"}},"disable":{"type":"boolean"},"client_headers":{"default":{},"type":"array","description":"authorization response header that will be sent tothe client when authorizing failed","items":{"type":"string"}},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"type":"integer","default":5},"request_headers":{"default":{},"type":"array","description":"client request header that will be sent to the authorization service","items":{"type":"string"}},"keepalive_timeout":{"minimum":1000,"type":"integer","default":60000},"timeout":{"maximum":60000,"type":"integer","minimum":1,"description":"timeout in milliseconds","default":3000}},"$comment":"this is a mark for our injected plugin schema"},"priority":2002,"version":0.1},"grpc-transcode":{"schema":{"required":["proto_id","service","method"],"type":"object","additionalProperties":true,"properties":{"deadline":{"default":0,"type":"number","description":"deadline for grpc, millisecond"},"disable":{"type":"boolean"},"proto_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"service":{"type":"string","description":"the grpc service name"},"method":{"type":"string","description":"the method name in the grpc service."},"pb_option":{"type":"array","minItems":1,"items":{"anyOf":[{"type":"string","enum":["int64_as_number","int64_as_string","int64_as_hexstring"],"description":"enum as result"},{"type":"string","enum":["enum_as_name","enum_as_value"],"description":"int64 as result"},{"type":"string","enum":["auto_default_values","no_default_values","use_default_values","use_default_metatable"],"description":"default values option"},{"type":"string","enum":["enable_hooks","disable_hooks"],"description":"hooks option"}],"type":"string"}}},"$comment":"this is a mark for our injected plugin schema"},"priority":506,"version":0.1},"referer-restriction":{"schema":{"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object","properties":{"disable":{"type":"boolean"},"bypass_missing":{"default":false,"type":"boolean"},"whitelist":{"type":"array","minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"blacklist":{"type":"array","minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"message":{"maxLength":1024,"type":"string","default":"Your referer host is not allowed","minLength":1}},"$comment":"this is a mark for our injected plugin schema"},"priority":2990,"version":0.1},"http-logger":{"schema":{"required":["uri"],"type":"object","properties":{"timeout":{"minimum":1,"type":"integer","default":3},"uri":{"pattern":"^[^\\\/]+:\\\/\\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"include_req_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"retry_delay":{"minimum":0,"type":"integer","default":1},"max_retry_count":{"minimum":0,"type":"integer","default":0},"disable":{"type":"boolean"},"auth_header":{"default":"","type":"string"},"ssl_verify":{"default":false,"type":"boolean"},"include_resp_body":{"default":false,"type":"boolean"},"include_resp_body_expr":{"type":"array","minItems":1,"items":{"type":"array"}},"concat_method":{"default":"json","type":"string","enum":["json","new_line"]},"name":{"default":"http logger","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":410,"version":0.1,"metadata_schema":{"properties":{"log_format":{"default":{"client_ip":"$remote_addr","host":"$host","@timestamp":"$time_iso8601"},"type":"object"}},"type":"object"}},"prometheus":{"schema":{"type":"object","properties":{"disable":{"type":"boolean"},"prefer_name":{"default":false,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":500,"version":0.2},"skywalking-logger":{"schema":{"required":["endpoint_addr"],"type":"object","properties":{"timeout":{"minimum":1,"type":"integer","default":3},"include_req_body":{"default":false,"type":"boolean"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"name":{"default":"skywalking logger","type":"string"},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"service_name":{"default":"APISIX","type":"string"},"endpoint_addr":{"pattern":"^[^\\\/]+:\\\/\\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"service_instance_name":{"default":"APISIX Instance Name","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":408,"version":0.1,"metadata_schema":{"properties":{"log_format":{"default":{"client_ip":"$remote_addr","host":"$host","@timestamp":"$time_iso8601"},"type":"object"}},"type":"object"}},"redirect":{"schema":{"oneOf":[{"required":["uri"]},{"required":["regex_uri"]},{"required":["http_to_https"]}],"type":"object","properties":{"append_query_string":{"default":false,"type":"boolean"},"uri":{"type":"string","pattern":"(\\\\\\$[0-9a-zA-Z_]+)|\\$\\{([0-9a-zA-Z_]+)\\}|\\$([0-9a-zA-Z_]+)|(\\$|[^$\\\\]+)","minLength":2},"disable":{"type":"boolean"},"regex_uri":{"type":"array","minItems":2,"items":{"type":"string","description":"regex uri"},"maxItems":2,"description":"params for generating new uri that substitute from client uri, first param is regular expression, the second one is uri template"},"ret_code":{"minimum":200,"type":"integer","default":302},"http_to_https":{"type":"boolean"},"encode_uri":{"default":false,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":900,"version":0.1},"ext-plugin-pre-req":{"schema":{"type":"object","properties":{"conf":{"type":"array","minItems":1,"items":{"type":"object","properties":{"value":{"type":"string"},"name":{"maxLength":128,"type":"string","minLength":1}},"required":["name","value"]}},"disable":{"type":"boolean"},"allow_degradation":{"default":false,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":12000,"version":0.1},"udp-logger":{"schema":{"required":["host","port"],"type":"object","properties":{"timeout":{"minimum":1,"type":"integer","default":3},"port":{"minimum":0,"type":"integer"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_req_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"host":{"type":"string"},"retry_delay":{"minimum":0,"type":"integer","default":1},"name":{"default":"udp logger","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":400,"version":0.1},"jwt-auth":{"schema":{"type":"object","properties":{"header":{"default":"authorization","type":"string"},"cookie":{"default":"jwt","type":"string"},"disable":{"type":"boolean"},"query":{"default":"jwt","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2510,"consumer_schema":{"dependencies":{"algorithm":{"oneOf":[{"properties":{"algorithm":{"enum":["HS256","HS512"],"default":"HS256"}}},{"properties":{"private_key":{"type":"string"},"public_key":{"type":"string"},"algorithm":{"enum":["RS256"]}},"required":["public_key","private_key"]},{"properties":{"algorithm":{"enum":["RS256"]},"vault":{"properties":{},"type":"object"}},"required":["vault"]}]}},"type":"object","properties":{"key":{"type":"string"},"exp":{"minimum":1,"type":"integer","default":86400},"secret":{"type":"string"},"base64_secret":{"default":false,"type":"boolean"},"algorithm":{"default":"HS256","type":"string","enum":["HS256","HS512","RS256"]},"vault":{"properties":{},"type":"object"}},"required":["key"]}},"openwhisk":{"schema":{"required":["api_host","service_token","namespace","action"],"type":"object","properties":{"timeout":{"maximum":60000,"type":"integer","minimum":1,"description":"timeout in milliseconds","default":3000},"keepalive":{"default":true,"type":"boolean"},"result":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"type":"integer","default":5},"package":{"maxLength":256,"type":"string","pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z"},"disable":{"type":"boolean"},"keepalive_timeout":{"minimum":1000,"type":"integer","default":60000},"ssl_verify":{"default":true,"type":"boolean"},"action":{"maxLength":256,"type":"string","pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z"},"api_host":{"type":"string"},"service_token":{"type":"string"},"namespace":{"maxLength":256,"type":"string","pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z"}},"$comment":"this is a mark for our injected plugin schema"},"priority":-1901,"version":0.1},"gzip":{"schema":{"type":"object","properties":{"comp_level":{"minimum":1,"type":"integer","default":1,"maximum":9},"http_version":{"enum":[1.1,1],"default":1.1},"disable":{"type":"boolean"},"vary":{"type":"boolean"},"buffers":{"default":{"number":32,"size":4096},"type":"object","properties":{"number":{"minimum":1,"type":"integer","default":32},"size":{"minimum":1,"type":"integer","default":4096}}},"types":{"default":["text\/html"],"anyOf":[{"type":"array","minItems":1,"items":{"minLength":1,"type":"string"}},{"enum":["*"]}]},"min_length":{"minimum":1,"type":"integer","default":20}},"$comment":"this is a mark for our injected plugin schema"},"priority":995,"version":0.1},"authz-casbin":{"schema":{"oneOf":[{"required":["model_path","policy_path","username"]},{"required":["model","policy","username"]}],"type":"object","properties":{"model":{"type":"string"},"policy":{"type":"string"},"disable":{"type":"boolean"},"username":{"type":"string"},"model_path":{"type":"string"},"policy_path":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2560,"version":0.1,"metadata_schema":{"type":"object","properties":{"model":{"type":"string"},"policy":{"type":"string"}},"required":["model","policy"]}},"proxy-cache":{"schema":{"type":"object","properties":{"cache_control":{"default":false,"type":"boolean"},"cache_bypass":{"type":"array","minItems":1,"items":{"pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"}},"no_cache":{"type":"array","minItems":1,"items":{"pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"}},"cache_zone":{"maxLength":100,"type":"string","default":"disk_cache_one","minLength":1},"cache_strategy":{"default":"disk","type":"string","enum":["disk","memory"]},"cache_key":{"default":["$host","$request_uri"],"type":"array","minItems":1,"items":{"type":"string","description":"a key for caching","pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)"}},"disable":{"type":"boolean"},"cache_http_status":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,301,404],"items":{"minimum":200,"type":"integer","maximum":599,"description":"http response status"}},"cache_method":{"type":"array","minItems":1,"uniqueItems":true,"default":["GET","HEAD"],"items":{"type":"string","enum":["GET","POST","HEAD"],"description":"supported http method"}},"cache_ttl":{"minimum":1,"type":"integer","default":300},"hide_cache_headers":{"default":false,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1009,"version":0.2},"ldap-auth":{"schema":{"required":["base_dn","ldap_uri"],"title":"work with route or service object","type":"object","properties":{"disable":{"type":"boolean"},"base_dn":{"type":"string"},"ldap_uri":{"type":"string"},"use_tls":{"type":"boolean"},"uid":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2540,"consumer_schema":{"required":["user_dn"],"title":"work with consumer object","properties":{"user_dn":{"type":"string"}},"type":"object"}},"clickhouse-logger":{"schema":{"required":["endpoint_addr","user","password","database","logtable"],"type":"object","properties":{"user":{"default":"","type":"string"},"endpoint_addr":{"pattern":"^[^\\\/]+:\\\/\\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"logtable":{"default":"","type":"string"},"retry_delay":{"minimum":0,"type":"integer","default":1},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"disable":{"type":"boolean"},"password":{"default":"","type":"string"},"ssl_verify":{"default":true,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"database":{"default":"","type":"string"},"timeout":{"minimum":1,"type":"integer","default":3},"name":{"default":"clickhouse-logger","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":398,"version":0.1,"metadata_schema":{"properties":{"log_format":{"default":{"client_ip":"$remote_addr","host":"$host","@timestamp":"$time_iso8601"},"type":"object"}},"type":"object"}},"csrf":{"schema":{"required":["key"],"type":"object","properties":{"disable":{"type":"boolean"},"key":{"type":"string","description":"use to generate csrf token"},"name":{"default":"apisix-csrf-token","type":"string","description":"the csrf token name"},"expires":{"default":7200,"type":"integer","description":"expires time(s) for csrf token"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2980,"version":0.1},"fault-injection":{"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","properties":{"abort":{"type":"object","properties":{"body":{"minLength":0,"type":"string"},"percentage":{"minimum":0,"type":"integer","maximum":100},"vars":{"maxItems":20,"type":"array","items":{"type":"array"}},"http_status":{"minimum":200,"type":"integer"}},"required":["http_status"]},"disable":{"type":"boolean"},"delay":{"type":"object","properties":{"vars":{"maxItems":20,"type":"array","items":{"type":"array"}},"percentage":{"minimum":0,"type":"integer","maximum":100},"duration":{"minimum":0,"type":"number"}},"required":["duration"]}},"minProperties":1},"priority":11000,"version":0.1},"traffic-split":{"schema":{"type":"object","properties":{"rules":{"items":{"properties":{"weighted_upstreams":{"type":"array","minItems":1,"items":{"properties":{"upstream":{"oneOf":[{"required":["type","nodes"]},{"required":["type","service_name","discovery_type"]}],"type":"object","properties":{"tls":{"type":"object","properties":{"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"required":["client_cert","client_key"]},"type":{"type":"string","description":"algorithms of load balancing"},"scheme":{"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc\/grpcs\/http\/https. For L4 proxy, it can be one of tcp\/tls\/udp.","enum":["grpc","grpcs","http","https","tcp","tls","udp"]},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"discovery_type":{"type":"string","description":"discovery type"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"discovery_args":{"properties":{"group_name":{"type":"string","description":"group name"},"namespace_id":{"type":"string","description":"namespace id"}},"type":"object"},"pass_host":{"default":"pass","type":"string","enum":["pass","node","rewrite"],"description":"mod of host passing"},"nodes":{"anyOf":[{"patternProperties":{".*":{"minimum":0,"type":"integer","description":"weight of node"}},"type":"object"},{"items":{"type":"object","properties":{"priority":{"default":0,"type":"integer","description":"priority of node"},"port":{"minimum":1,"type":"integer","description":"port of node"},"weight":{"minimum":0,"type":"integer","description":"weight of node"},"metadata":{"type":"object","description":"metadata of node"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"required":["host","port","weight"]},"type":"array"}]},"service_name":{"maxLength":256,"type":"string","minLength":1},"checks":{"type":"object","properties":{"active":{"properties":{"req_headers":{"type":"array","minItems":1,"items":{"uniqueItems":true,"type":"string"}},"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"port":{"minimum":1,"type":"integer","maximum":65535},"healthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,302],"items":{"minimum":200,"type":"integer","maximum":599}},"successes":{"minimum":1,"type":"integer","default":2,"maximum":254}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"\/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"unhealthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_failures":{"minimum":1,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,404,500,501,502,503,504,505],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":1,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":1,"type":"integer","default":3,"maximum":254}},"type":"object"},"timeout":{"default":1,"type":"number"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"type":"object"},"passive":{"default":{"type":"http","healthy":{"successes":0,"http_statuses":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]},"unhealthy":{"http_failures":0,"http_statuses":[429,500,503],"tcp_failures":0,"timeouts":0}},"type":"object","properties":{"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"healthy":{"properties":{"successes":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"items":{"minimum":200,"type":"integer","maximum":599}}},"type":"object"},"unhealthy":{"properties":{"http_failures":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,500,503],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":0,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":0,"type":"integer","default":7,"maximum":254}},"type":"object"}}}},"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"timeout":{"type":"object","properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"]},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"name":{"maxLength":100,"type":"string","minLength":1},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"update_time":{"type":"integer"},"keepalive_pool":{"properties":{"requests":{"default":1000,"type":"integer","minimum":1},"idle_timeout":{"default":60,"type":"number","minimum":0},"size":{"default":320,"type":"integer","minimum":1}},"type":"object"},"hash_on":{"default":"vars","type":"string","enum":["vars","header","cookie","consumer","vars_combinations"]}}},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"weight":{"default":1,"type":"integer","minimum":0,"description":"used to split traffic between differentupstreams for plugin configuration"}},"type":"object"},"default":[{"weight":1}],"maxItems":20},"match":{"items":{"properties":{"vars":{"type":"array"}},"type":"object"},"type":"array"}},"type":"object"},"type":"array"},"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":966,"version":0.1},"skywalking":{"schema":{"type":"object","properties":{"disable":{"type":"boolean"},"sample_ratio":{"minimum":1e-05,"type":"number","default":1,"maximum":1}},"$comment":"this is a mark for our injected plugin schema"},"priority":12010,"version":0.1},"echo":{"schema":{"type":"object","minProperties":1,"$comment":"this is a mark for our injected plugin schema","properties":{"body":{"type":"string","description":"body to replace upstream response."},"after_body":{"type":"string","description":"body after the modification of filter phase."},"headers":{"type":"object","description":"new headers for response","minProperties":1},"before_body":{"type":"string","description":"body before the filter phase."},"disable":{"type":"boolean"}},"anyOf":[{"required":["before_body"]},{"required":["body"]},{"required":["after_body"]}]},"priority":412,"version":0.1},"request-validation":{"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","properties":{"disable":{"type":"boolean"},"header_schema":{"type":"object"},"body_schema":{"type":"object"},"rejected_code":{"minimum":200,"type":"integer","default":400,"maximum":599},"rejected_msg":{"maxLength":256,"type":"string","minLength":1}},"anyOf":[{"required":["header_schema"]},{"required":["body_schema"]}]},"type":"validation","version":0.1,"priority":2800},"api-breaker":{"schema":{"required":["break_response_code"],"type":"object","properties":{"disable":{"type":"boolean"},"unhealthy":{"default":{"failures":3,"http_statuses":[500]},"type":"object","properties":{"failures":{"minimum":1,"type":"integer","default":3},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[500],"items":{"minimum":500,"type":"integer","maximum":599}}}},"max_breaker_sec":{"minimum":3,"type":"integer","default":300},"healthy":{"default":{"successes":3,"http_statuses":[200]},"type":"object","properties":{"successes":{"minimum":1,"type":"integer","default":3},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200],"items":{"minimum":200,"type":"integer","maximum":499}}}},"break_response_code":{"minimum":200,"type":"integer","maximum":599}},"$comment":"this is a mark for our injected plugin schema"},"priority":1005,"version":0.1},"serverless-pre-function":{"schema":{"required":["functions"],"type":"object","properties":{"phase":{"default":"access","type":"string","enum":["rewrite","access","header_filter","body_filter","log","before_proxy"]},"disable":{"type":"boolean"},"functions":{"type":"array","minItems":1,"items":{"type":"string"}}},"$comment":"this is a mark for our injected plugin schema"},"priority":10000,"version":0.1},"authz-keycloak":{"schema":{"allOf":[{"anyOf":[{"required":["discovery"]},{"required":["token_endpoint"]}]},{"anyOf":[{"required":["client_id"]},{"required":["audience"]}]},{"anyOf":[{"properties":{"lazy_load_paths":{"enum":[false]}}},{"properties":{"lazy_load_paths":{"enum":[true]}},"anyOf":[{"required":["discovery"]},{"required":["resource_registration_endpoint"]}]}]}],"type":"object","properties":{"access_denied_redirect_uri":{"maxLength":2048,"type":"string","minLength":1},"access_token_expires_in":{"minimum":1,"type":"integer","default":300},"access_token_expires_leeway":{"minimum":0,"type":"integer","default":0},"refresh_token_expires_in":{"minimum":1,"type":"integer","default":3600},"refresh_token_expires_leeway":{"minimum":0,"type":"integer","default":0},"password_grant_token_generation_incoming_uri":{"maxLength":4096,"type":"string","minLength":1},"keepalive_timeout":{"minimum":1000,"type":"integer","default":60000},"discovery":{"maxLength":4096,"type":"string","minLength":1},"keepalive_pool":{"minimum":1,"type":"integer","default":5},"timeout":{"minimum":1000,"type":"integer","default":3000},"token_endpoint":{"maxLength":4096,"type":"string","minLength":1},"resource_registration_endpoint":{"maxLength":4096,"type":"string","minLength":1},"client_id":{"maxLength":100,"type":"string","minLength":1},"audience":{"maxLength":100,"type":"string","description":"Deprecated, use `client_id` instead.","minLength":1},"keepalive":{"default":true,"type":"boolean"},"client_secret":{"maxLength":100,"type":"string","minLength":1},"grant_type":{"type":"string","enum":["urn:ietf:params:oauth:grant-type:uma-ticket"],"minLength":1,"default":"urn:ietf:params:oauth:grant-type:uma-ticket","maxLength":100},"disable":{"type":"boolean"},"policy_enforcement_mode":{"default":"ENFORCING","type":"string","enum":["ENFORCING","PERMISSIVE"]},"ssl_verify":{"default":true,"type":"boolean"},"permissions":{"default":{},"type":"array","uniqueItems":true,"items":{"maxLength":100,"type":"string","minLength":1}},"lazy_load_paths":{"default":false,"type":"boolean"},"http_method_as_scope":{"default":false,"type":"boolean"},"cache_ttl_seconds":{"minimum":1,"type":"integer","default":86400}},"$comment":"this is a mark for our injected plugin schema"},"priority":2000,"version":0.1},"grpc-web":{"schema":{"type":"object","properties":{"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":505,"version":0.1},"ua-restriction":{"schema":{"type":"object","properties":{"allowlist":{"type":"array","minItems":1,"items":{"minLength":1,"type":"string"}},"denylist":{"type":"array","minItems":1,"items":{"minLength":1,"type":"string"}},"bypass_missing":{"default":false,"type":"boolean"},"message":{"maxLength":1024,"type":"string","default":"Not allowed","minLength":1},"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2999,"version":0.1},"ext-plugin-post-req":{"schema":{"type":"object","properties":{"conf":{"type":"array","minItems":1,"items":{"type":"object","properties":{"value":{"type":"string"},"name":{"maxLength":128,"type":"string","minLength":1}},"required":["name","value"]}},"disable":{"type":"boolean"},"allow_degradation":{"default":false,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":-3000,"version":0.1},"proxy-rewrite":{"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","properties":{"uri":{"type":"string","minLength":1,"maxLength":4096,"description":"new uri for upstream","pattern":"^\\\/.*"},"disable":{"type":"boolean"},"headers":{"type":"object","description":"new headers for request","minProperties":1},"scheme":{"type":"string","enum":["http","https"],"description":"new scheme for upstream"},"method":{"type":"string","enum":["UNLOCK","PATCH","TRACE","GET","HEAD","POST","PUT","DELETE","MKCOL","COPY","MOVE","OPTIONS","PROPFIND","LOCK"],"description":"proxy route method"},"regex_uri":{"type":"array","minItems":2,"items":{"type":"string","description":"regex uri"},"maxItems":2,"description":"new uri that substitute from client uri for upstream, lower priority than uri property"},"host":{"type":"string","description":"new host for upstream","pattern":"^[0-9a-zA-Z-.]+(:\\d{1,5})?$"}},"minProperties":1},"priority":1008,"version":0.1},"uri-blocker":{"schema":{"required":["block_rules"],"type":"object","properties":{"block_rules":{"type":"array","uniqueItems":true,"items":{"maxLength":4096,"type":"string","minLength":1}},"case_insensitive":{"default":false,"type":"boolean"},"disable":{"type":"boolean"},"rejected_code":{"minimum":200,"type":"integer","default":403},"rejected_msg":{"minLength":1,"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2900,"version":0.1},"request-id":{"schema":{"type":"object","properties":{"disable":{"type":"boolean"},"include_in_response":{"default":true,"type":"boolean"},"algorithm":{"default":"uuid","type":"string","enum":["uuid","snowflake","nanoid"]},"header_name":{"default":"X-Request-Id","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":11010,"version":0.1},"limit-req":{"schema":{"required":["rate","burst","key"],"type":"object","properties":{"rejected_code":{"minimum":200,"type":"integer","default":503,"maximum":599},"rejected_msg":{"minLength":1,"type":"string"},"key":{"type":"string"},"rate":{"exclusiveMinimum":0,"type":"number"},"allow_degradation":{"default":false,"type":"boolean"},"key_type":{"default":"var","type":"string","enum":["var","var_combination"]},"disable":{"type":"boolean"},"nodelay":{"default":false,"type":"boolean"},"burst":{"minimum":0,"type":"number"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1001,"version":0.1},"limit-conn":{"schema":{"required":["conn","burst","default_conn_delay","key"],"type":"object","properties":{"default_conn_delay":{"exclusiveMinimum":0,"type":"number"},"rejected_code":{"minimum":200,"type":"integer","default":503,"maximum":599},"rejected_msg":{"minLength":1,"type":"string"},"key":{"type":"string"},"disable":{"type":"boolean"},"burst":{"minimum":0,"type":"integer"},"key_type":{"default":"var","type":"string","enum":["var","var_combination"]},"allow_degradation":{"default":false,"type":"boolean"},"only_use_default_delay":{"default":false,"type":"boolean"},"conn":{"exclusiveMinimum":0,"type":"integer"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1003,"version":0.1},"response-rewrite":{"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","properties":{"body":{"type":"string","description":"new body for response"},"disable":{"type":"boolean"},"oneOf":["body","filters"],"headers":{"type":"object","description":"new headers for response","minProperties":1},"vars":{"type":"array"},"filters":{"description":"a group of filters that modify response bodyby replacing one specified string by another","type":"array","minItems":1,"items":{"required":["regex","replace"],"type":"object","properties":{"replace":{"type":"string","description":"regex substitution content"},"scope":{"default":"once","type":"string","enum":["once","global"],"description":"regex substitution range"},"regex":{"type":"string","description":"match pattern on response body","minLength":1},"options":{"default":"jo","type":"string","description":"regex options"}},"description":"filter that modifies response body"}},"body_base64":{"default":false,"type":"boolean","description":"whether new body for response need base64 decode before return"},"status_code":{"minimum":200,"type":"integer","maximum":598,"description":"new status code for response"}},"minProperties":1},"priority":899,"version":0.1},"cors":{"schema":{"type":"object","properties":{"expose_headers":{"default":"*","type":"string","description":"you can use '*' to expose all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *."},"allow_credential":{"default":false,"type":"boolean","description":"allow client append credential. according to CORS specification,if you set this option to 'true', you can not use '*' for other options."},"allow_origins":{"default":"*","type":"string","description":"you can use '*' to allow all origins when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple origin use ',' to split. default: *.","pattern":"^(\\*|\\*\\*|null|\\w+:\/\/[^,]+(,\\w+:\/\/[^,]+)*)$"},"allow_origins_by_regex":{"type":"array","minItems":1,"items":{"maxLength":4096,"type":"string","minLength":1},"description":"you can use regex to allow specific origins when no credentials,for example use [.*\\.test.com] to allow a.test.com and b.test.com","uniqueItems":true},"allow_methods":{"default":"*","type":"string","description":"you can use '*' to allow all methods when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple method use ',' to split. default: *."},"allow_origins_by_metadata":{"type":"array","minItems":1,"items":{"maxLength":4096,"type":"string","minLength":1},"description":"set allowed origins by referencing origins in plugin metadata","uniqueItems":true},"disable":{"type":"boolean"},"max_age":{"default":5,"type":"integer","description":"maximum number of seconds the results can be cached.-1 means no cached, the max value is depend on browser,more details plz check MDN. default: 5."},"allow_headers":{"default":"*","type":"string","description":"you can use '*' to allow all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *."}},"$comment":"this is a mark for our injected plugin schema"},"priority":4000,"version":0.1,"metadata_schema":{"properties":{"allow_origins":{"additionalProperties":{"pattern":"^(\\*|\\*\\*|null|\\w+:\/\/[^,]+(,\\w+:\/\/[^,]+)*)$","type":"string"},"type":"object"}},"type":"object"}},"aws-lambda":{"schema":{"required":["function_uri"],"type":"object","properties":{"keepalive_timeout":{"minimum":1000,"type":"integer","default":60000},"timeout":{"minimum":100,"type":"integer","default":3000},"disable":{"type":"boolean"},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"type":"integer","default":5},"keepalive":{"default":true,"type":"boolean"},"authorization":{"properties":{"apikey":{"type":"string"},"iam":{"type":"object","properties":{"accesskey":{"description":"access key id from from aws iam console","type":"string"},"service":{"default":"execute-api","type":"string","description":"the service that is receiving the request"},"secretkey":{"description":"secret access key from from aws iam console","type":"string"},"aws_region":{"default":"us-east-1","type":"string","description":"the aws region that is receiving the request"}},"required":["accesskey","secretkey"]}},"type":"object"},"function_uri":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":-1899,"version":0.1},"syslog":{"schema":{"required":["host","port"],"type":"object","properties":{"tls":{"default":false,"type":"boolean"},"pool_size":{"minimum":5,"type":"integer","default":5},"max_retry_times":{"minimum":1,"type":"integer"},"retry_interval":{"minimum":0,"type":"integer"},"flush_limit":{"minimum":1,"type":"integer","default":4096},"drop_limit":{"default":1048576,"type":"integer"},"sock_type":{"default":"tcp","type":"string","enum":["tcp","udp"]},"port":{"type":"integer"},"timeout":{"minimum":1,"type":"integer","default":3000},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"host":{"type":"string"},"disable":{"type":"boolean"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"include_req_body":{"default":false,"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"name":{"default":"sys logger","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":401,"version":0.1},"consumer-restriction":{"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","properties":{"type":{"default":"consumer_name","type":"string","enum":["consumer_name","service_id","route_id"]},"allowed_by_methods":{"items":{"properties":{"user":{"type":"string"},"methods":{"type":"array","minItems":1,"items":{"type":"string","enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"],"description":"HTTP method"}}},"type":"object"},"type":"array"},"disable":{"type":"boolean"},"rejected_code":{"minimum":200,"type":"integer","default":403},"whitelist":{"type":"array","minItems":1,"items":{"type":"string"}},"blacklist":{"type":"array","minItems":1,"items":{"type":"string"}},"rejected_msg":{"type":"string"}},"anyOf":[{"required":["blacklist"]},{"required":["whitelist"]},{"required":["allowed_by_methods"]}]},"priority":2400,"version":0.1},"mocking":{"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","properties":{"response_example":{"type":"string"},"response_schema":{"type":"object"},"with_mock_header":{"default":true,"type":"boolean"},"content_type":{"default":"application\/json;charset=utf8","type":"string"},"disable":{"type":"boolean"},"delay":{"default":0,"type":"integer"},"response_status":{"default":200,"type":"integer","minimum":100}},"anyOf":[{"required":["response_example"]},{"required":["response_schema"]}]},"priority":10900,"version":0.1},"authz-casdoor":{"schema":{"required":["callback_url","endpoint_addr","client_id","client_secret"],"type":"object","properties":{"endpoint_addr":{"pattern":"^[^%?]+[^\/]$","type":"string"},"client_id":{"type":"string"},"disable":{"type":"boolean"},"callback_url":{"pattern":"^[^%?]+[^\/]$","type":"string"},"client_secret":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2559,"version":0.1},"file-logger":{"schema":{"required":["path"],"type":"object","properties":{"disable":{"type":"boolean"},"path":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":399,"version":0.1,"metadata_schema":{"properties":{"log_format":{"default":{"client_ip":"$remote_addr","host":"$host","@timestamp":"$time_iso8601"},"type":"object"}},"type":"object"}},"example-plugin":{"schema":{"required":["i"],"type":"object","properties":{"s":{"type":"string"},"t":{"minItems":1,"type":"array"},"disable":{"type":"boolean"},"ip":{"type":"string"},"i":{"minimum":0,"type":"number"},"port":{"type":"integer"}},"$comment":"this is a mark for our injected plugin schema"},"priority":0,"version":0.1,"metadata_schema":{"type":"object","properties":{"ikey":{"minimum":0,"type":"number"},"skey":{"type":"string"}},"required":["ikey","skey"]}},"basic-auth":{"schema":{"type":"object","title":"work with route or service object","properties":{"disable":{"type":"boolean"},"hide_credentials":{"default":false,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2520,"consumer_schema":{"required":["username","password"],"title":"work with consumer object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"type":"object"}},"zipkin":{"schema":{"required":["endpoint","sample_ratio"],"type":"object","properties":{"server_addr":{"description":"default is $server_addr, you can specify your external ip address","type":"string","pattern":"^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$"},"disable":{"type":"boolean"},"span_version":{"enum":[1,2],"default":2},"service_name":{"default":"APISIX","description":"service name for zipkin reporter","type":"string"},"sample_ratio":{"minimum":1e-05,"type":"number","maximum":1},"endpoint":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":12011,"version":0.1},"hmac-auth":{"schema":{"type":"object","title":"work with route or service object","properties":{"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2530,"consumer_schema":{"required":["access_key","secret_key"],"title":"work with consumer object","properties":{"max_req_body":{"default":524288,"title":"Max request body size","type":"integer"},"access_key":{"maxLength":256,"type":"string","minLength":1},"secret_key":{"maxLength":256,"type":"string","minLength":1},"signed_headers":{"items":{"maxLength":50,"type":"string","minLength":1},"type":"array"},"keep_headers":{"default":false,"title":"whether to keep the http request header","type":"boolean"},"clock_skew":{"default":0,"type":"integer"},"encode_uri_params":{"default":true,"title":"Whether to escape the uri parameter","type":"boolean"},"algorithm":{"default":"hmac-sha256","type":"string","enum":["hmac-sha1","hmac-sha256","hmac-sha512"]},"validate_request_body":{"default":false,"title":"A boolean value telling the plugin to enable body validation","type":"boolean"}},"type":"object"}},"opa":{"schema":{"required":["host","policy"],"type":"object","properties":{"timeout":{"maximum":60000,"type":"integer","minimum":1,"description":"timeout in milliseconds","default":3000},"keepalive":{"default":true,"type":"boolean"},"with_route":{"default":false,"type":"boolean"},"keepalive_timeout":{"minimum":1000,"type":"integer","default":60000},"with_consumer":{"default":false,"type":"boolean"},"disable":{"type":"boolean"},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"type":"integer","default":5},"with_service":{"default":false,"type":"boolean"},"policy":{"type":"string"},"host":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2001,"version":0.1},"wolf-rbac":{"schema":{"type":"object","properties":{"appid":{"default":"unset","type":"string"},"disable":{"type":"boolean"},"header_prefix":{"default":"X-","type":"string"},"server":{"default":"http:\/\/127.0.0.1:12180","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2555},"server-info":{"schema":{"type":"object","properties":{"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":990,"version":0.1,"scope":"global"},"proxy-mirror":{"schema":{"required":["host"],"type":"object","properties":{"disable":{"type":"boolean"},"path":{"pattern":"^\/[^?&]+$","type":"string"},"sample_ratio":{"minimum":1e-05,"type":"number","default":1,"maximum":1},"host":{"pattern":"^http(s)?:\\\/\\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?$","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1010,"version":0.1},"serverless-post-function":{"schema":{"required":["functions"],"type":"object","properties":{"phase":{"default":"access","type":"string","enum":["rewrite","access","header_filter","body_filter","log","before_proxy"]},"disable":{"type":"boolean"},"functions":{"type":"array","minItems":1,"items":{"type":"string"}}},"$comment":"this is a mark for our injected plugin schema"},"priority":-2000,"version":0.1},"mico-auth":{"schema":{"type":"object","properties":{"header":{"default":"authorization","type":"string"},"cookie":{"default":"jwt","type":"string"},"disable":{"type":"boolean"},"query":{"default":"jwt","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2511,"consumer_schema":{"type":"object","dependencies":{"algorithm":{"oneOf":[{"properties":{"algorithm":{"enum":["HS256","HS512"],"default":"HS256"}}},{"properties":{"private_key":{"type":"string"},"public_key":{"type":"string"},"algorithm":{"enum":["RS256"]}},"required":["public_key","private_key"]},{"properties":{"algorithm":{"enum":["RS256"]},"vault":{"properties":{},"type":"object"}},"required":["vault"]}]}},"properties":{"key":{"type":"string"},"exp":{"minimum":1,"type":"integer","default":86400},"secret":{"type":"string"},"base64_secret":{"default":false,"type":"boolean"},"algorithm":{"default":"HS256","type":"string","enum":["HS256","HS512","RS256"]},"vault":{"properties":{},"type":"object"}},"required":["key"]}},"limit-count":{"schema":{"type":"object","required":["count","time_window"],"else":{"then":{"properties":{"redis_cluster_nodes":{"type":"array","minItems":2,"items":{"maxLength":100,"type":"string","minLength":2}},"redis_cluster_name":{"type":"string"},"redis_timeout":{"minimum":1,"type":"integer","default":1000},"redis_password":{"minLength":0,"type":"string"}},"required":["redis_cluster_nodes","redis_cluster_name"]},"if":{"properties":{"policy":{"enum":["redis-cluster"]}}}},"then":{"properties":{"redis_password":{"minLength":0,"type":"string"},"redis_database":{"minimum":0,"type":"integer","default":0},"redis_timeout":{"minimum":1,"type":"integer","default":1000},"redis_host":{"minLength":2,"type":"string"},"redis_port":{"minimum":1,"type":"integer","default":6379}},"required":["redis_host"]},"if":{"properties":{"policy":{"enum":["redis"]}}},"properties":{"policy":{"default":"local","type":"string","enum":["local","redis","redis-cluster"]},"group":{"type":"string"},"rejected_code":{"minimum":200,"type":"integer","default":503,"maximum":599},"rejected_msg":{"minLength":1,"type":"string"},"key":{"default":"remote_addr","type":"string"},"disable":{"type":"boolean"},"allow_degradation":{"default":false,"type":"boolean"},"key_type":{"default":"var","type":"string","enum":["var","var_combination","constant"]},"count":{"exclusiveMinimum":0,"type":"integer"},"time_window":{"exclusiveMinimum":0,"type":"integer"},"show_limit_quota_header":{"default":true,"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1002,"version":0.4},"kafka-logger":{"schema":{"required":["broker_list","kafka_topic"],"type":"object","properties":{"broker_list":{"type":"object","patternProperties":{".*":{"minimum":1,"type":"integer","maximum":65535,"description":"the port of kafka broker"}},"minProperties":1},"kafka_topic":{"type":"string"},"producer_type":{"default":"async","type":"string","enum":["async","sync"]},"required_acks":{"default":1,"type":"integer","enum":[0,1,-1]},"cluster_name":{"minimum":1,"type":"integer","default":1},"meta_format":{"default":"default","type":"string","enum":["default","origin"]},"timeout":{"minimum":1,"type":"integer","default":3},"include_resp_body":{"default":false,"type":"boolean"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"key":{"type":"string"},"include_req_body_expr":{"type":"array","minItems":1,"items":{"type":"array"}},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"include_resp_body_expr":{"type":"array","minItems":1,"items":{"type":"array"}},"include_req_body":{"default":false,"type":"boolean"},"name":{"default":"kafka logger","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":403,"version":0.1,"metadata_schema":{"properties":{"log_format":{"default":{"client_ip":"$remote_addr","host":"$host","@timestamp":"$time_iso8601"},"type":"object"}},"type":"object"}},"datadog":{"schema":{"type":"object","properties":{"inactive_timeout":{"minimum":1,"type":"integer","default":5},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"prefer_name":{"default":true,"type":"boolean"},"name":{"default":"datadog","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":495,"version":0.1,"metadata_schema":{"properties":{"host":{"default":"127.0.0.1","type":"string"},"namespace":{"default":"apisix","type":"string"},"constant_tags":{"default":["source:apisix"],"type":"array","items":{"type":"string"}},"port":{"minimum":0,"type":"integer","default":8125}},"type":"object"}},"public-api":{"schema":{"type":"object","properties":{"disable":{"type":"boolean"},"uri":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":501,"version":0.1},"splunk-hec-logging":{"schema":{"required":["endpoint"],"type":"object","properties":{"ssl_verify":{"default":true,"type":"boolean"},"endpoint":{"type":"object","properties":{"channel":{"type":"string"},"uri":{"pattern":"^[^\\\/]+:\\\/\\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"timeout":{"minimum":1,"type":"integer","default":10},"token":{"type":"string"}},"required":["uri","token"]},"disable":{"type":"boolean"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"name":{"default":"splunk-hec-logging","type":"string"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"inactive_timeout":{"minimum":1,"type":"integer","default":5}},"$comment":"this is a mark for our injected plugin schema"},"priority":409,"version":0.1},"sls-logger":{"schema":{"required":["host","port","project","logstore","access_key_id","access_key_secret"],"type":"object","properties":{"project":{"type":"string"},"timeout":{"minimum":1,"type":"integer","default":5000},"access_key_id":{"type":"string"},"port":{"type":"integer"},"retry_delay":{"minimum":0,"type":"integer","default":1},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"name":{"default":"sls-logger","type":"string"},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_req_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"access_key_secret":{"type":"string"},"logstore":{"type":"string"},"host":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":406,"version":0.1},"openid-connect":{"schema":{"required":["client_id","client_secret","discovery"],"type":"object","properties":{"scope":{"default":"openid","type":"string"},"introspection_endpoint":{"type":"string"},"introspection_endpoint_auth_method":{"default":"client_secret_basic","type":"string"},"bearer_only":{"default":false,"type":"boolean"},"realm":{"default":"apisix","type":"string"},"logout_path":{"default":"\/logout","type":"string"},"discovery":{"type":"string"},"post_logout_redirect_uri":{"description":"the URI will be redirect when request logout_path","type":"string"},"token_signing_alg_values_expected":{"type":"string"},"set_access_token_header":{"default":true,"type":"boolean","description":"Whether the access token should be added as a header to the request for downstream"},"access_token_in_authorization_header":{"default":false,"type":"boolean","description":"Whether the access token should be added in the Authorization header as opposed to the X-Access-Token header."},"timeout":{"minimum":1,"type":"integer","description":"timeout in seconds","default":3},"public_key":{"type":"string"},"set_id_token_header":{"default":true,"type":"boolean","description":"Whether the ID token should be added in the X-ID-Token header to the request for downstream."},"client_id":{"type":"string"},"set_userinfo_header":{"default":true,"type":"boolean","description":"Whether the user info token should be added in the X-Userinfo header to the request for downstream."},"redirect_uri":{"description":"use ngx.var.request_uri if not configured","type":"string"},"disable":{"type":"boolean"},"ssl_verify":{"default":false,"type":"boolean"},"client_secret":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":2599,"version":0.1},"azure-functions":{"schema":{"required":["function_uri"],"type":"object","properties":{"keepalive_timeout":{"minimum":1000,"type":"integer","default":60000},"timeout":{"minimum":100,"type":"integer","default":3000},"disable":{"type":"boolean"},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"type":"integer","default":5},"keepalive":{"default":true,"type":"boolean"},"authorization":{"properties":{"apikey":{"type":"string"},"clientid":{"type":"string"}},"type":"object"},"function_uri":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":-1900,"version":0.1,"metadata_schema":{"properties":{"master_clientid":{"default":"","type":"string"},"master_apikey":{"default":"","type":"string"}},"type":"object"}},"tcp-logger":{"schema":{"required":["host","port"],"type":"object","properties":{"tls":{"default":false,"type":"boolean"},"timeout":{"minimum":1,"type":"integer","default":1000},"port":{"minimum":0,"type":"integer"},"name":{"default":"tcp logger","type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"include_req_body":{"default":false,"type":"boolean"},"tls_options":{"type":"string"},"host":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":405,"version":0.1},"client-control":{"schema":{"type":"object","properties":{"max_body_size":{"minimum":0,"type":"integer"},"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":22000,"version":0.1},"google-cloud-logging":{"schema":{"oneOf":[{"required":["auth_config"]},{"required":["auth_file"]}],"type":"object","properties":{"auth_file":{"type":"string"},"log_id":{"default":"apisix.apache.org%2Flogs","type":"string"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"auth_config":{"type":"object","properties":{"private_key":{"type":"string"},"project_id":{"type":"string"},"token_uri":{"default":"https:\/\/oauth2.googleapis.com\/token","type":"string"},"scopes":{"type":"array","minItems":1,"uniqueItems":true,"default":["https:\/\/www.googleapis.com\/auth\/logging.read","https:\/\/www.googleapis.com\/auth\/logging.write","https:\/\/www.googleapis.com\/auth\/logging.admin","https:\/\/www.googleapis.com\/auth\/cloud-platform"],"items":{"type":"string","description":"Google OAuth2 Authorization Scopes"}},"entries_uri":{"default":"https:\/\/logging.googleapis.com\/v2\/entries:write","type":"string"}},"required":["private_key","project_id","token_uri"]},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"resource":{"default":{"type":"global"},"type":"object","properties":{"labels":{"type":"object"},"type":{"type":"string"}},"required":["type"]},"buffer_duration":{"minimum":1,"type":"integer","default":60},"retry_delay":{"minimum":0,"type":"integer","default":1},"ssl_verify":{"default":true,"type":"boolean"},"name":{"default":"google-cloud-logging","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":407,"version":0.1},"proxy-control":{"schema":{"type":"object","properties":{"request_buffering":{"default":true,"type":"boolean"},"disable":{"type":"boolean"}},"$comment":"this is a mark for our injected plugin schema"},"priority":21990,"version":0.1},"rocketmq-logger":{"schema":{"required":["nameserver_list","topic"],"type":"object","properties":{"use_tls":{"default":false,"type":"boolean"},"key":{"type":"string"},"meta_format":{"default":"default","type":"string","enum":["default","origin"]},"include_resp_body":{"default":false,"type":"boolean"},"nameserver_list":{"type":"array","minItems":1,"items":{"type":"string"}},"topic":{"type":"string"},"access_key":{"default":"","type":"string"},"secret_key":{"default":"","type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"tag":{"type":"string"},"timeout":{"minimum":1,"type":"integer","default":3},"include_req_body_expr":{"type":"array","minItems":1,"items":{"type":"array"}},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"include_resp_body_expr":{"type":"array","minItems":1,"items":{"type":"array"}},"include_req_body":{"default":false,"type":"boolean"},"name":{"default":"rocketmq logger","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":402,"version":0.1,"metadata_schema":{"properties":{"log_format":{"default":{"client_ip":"$remote_addr","host":"$host","@timestamp":"$time_iso8601"},"type":"object"}},"type":"object"}},"real-ip":{"schema":{"required":["source"],"type":"object","properties":{"disable":{"type":"boolean"},"source":{"minLength":1,"type":"string"},"trusted_addresses":{"type":"array","minItems":1,"items":{"anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}}},"$comment":"this is a mark for our injected plugin schema"},"priority":23000,"version":0.1},"key-auth":{"schema":{"type":"object","properties":{"header":{"default":"apikey","type":"string"},"hide_credentials":{"default":false,"type":"boolean"},"disable":{"type":"boolean"},"query":{"default":"apikey","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth","version":0.1,"priority":2500,"consumer_schema":{"type":"object","properties":{"key":{"type":"string"}},"required":["key"]}},"ip-restriction":{"schema":{"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object","properties":{"disable":{"type":"boolean"},"whitelist":{"type":"array","minItems":1,"items":{"anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}},"message":{"maxLength":1024,"type":"string","default":"Your IP address is not allowed","minLength":1},"blacklist":{"type":"array","minItems":1,"items":{"anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}}},"$comment":"this is a mark for our injected plugin schema"},"priority":3000,"version":0.1},"loggly":{"schema":{"required":["customer_token"],"type":"object","properties":{"severity_map":{"additionalProperties":false,"description":"upstream response code vs syslog severity mapping","patternProperties":{"^[1-5][0-9]{2}$":{"type":"string","enum":["NOTICE","notice","INFO","info","DEBUG","debug","EMEGR","emegr","ALERT","alert","CRIT","crit","ERR","err","WARNING","warning"],"description":"keys are HTTP status code, values are severity"}},"type":"object"},"customer_token":{"type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"include_req_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"retry_delay":{"minimum":0,"type":"integer","default":1},"severity":{"default":"INFO","type":"string","enum":["NOTICE","notice","INFO","info","DEBUG","debug","EMEGR","emegr","ALERT","alert","CRIT","crit","ERR","err","WARNING","warning"],"description":"base severity log level"},"disable":{"type":"boolean"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"ssl_verify":{"default":true,"type":"boolean"},"include_resp_body":{"default":false,"type":"boolean"},"include_resp_body_expr":{"type":"array","minItems":1,"items":{"type":"array"}},"tags":{"default":["apisix"],"type":"array","minItems":1,"items":{"pattern":"^(?!tag=)[ -~]*","type":"string"}},"name":{"default":"loggly","type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":411,"version":0.1,"metadata_schema":{"properties":{"timeout":{"minimum":1,"type":"integer","default":5000},"protocol":{"default":"syslog","type":"string","enum":["syslog","http","https"]},"log_format":{"type":"object"},"port":{"default":514,"type":"integer"},"host":{"default":"logs-01.loggly.com","type":"string"}},"type":"object"}}},"main":{"plugins":{"items":{"type":"object","properties":{"stream":{"type":"boolean"},"name":{"minLength":1,"type":"string"}},"required":["name"]},"type":"array"},"upstream_hash_vars_schema":{"pattern":"^((uri|server_name|server_addr|request_uri|remote_port|remote_addr|query_string|host|hostname)|arg_[0-9a-zA-z_-]+)$","type":"string"},"consumer":{"type":"object","properties":{"plugins":{"type":"object"},"desc":{"maxLength":256,"type":"string"},"update_time":{"type":"integer"},"create_time":{"type":"integer"},"username":{"maxLength":100,"type":"string","pattern":"^[a-zA-Z0-9_]+$","minLength":1},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"}},"required":["username"]},"route":{"type":"object","allOf":[{"oneOf":[{"required":["uri"]},{"required":["uris"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["host"]},{"required":["hosts"]}]}},{"required":["host"]},{"required":["hosts"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["remote_addr"]},{"required":["remote_addrs"]}]}},{"required":["remote_addr"]},{"required":["remote_addrs"]}]}],"not":{"anyOf":[{"required":["script","plugins"]},{"required":["script","plugin_config_id"]}]},"properties":{"filter_func":{"type":"string","pattern":"^function","minLength":10},"script_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"upstream":{"oneOf":[{"required":["type","nodes"]},{"required":["type","service_name","discovery_type"]}],"type":"object","properties":{"tls":{"type":"object","properties":{"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"required":["client_cert","client_key"]},"type":{"type":"string","description":"algorithms of load balancing"},"scheme":{"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc\/grpcs\/http\/https. For L4 proxy, it can be one of tcp\/tls\/udp.","enum":["grpc","grpcs","http","https","tcp","tls","udp"]},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"discovery_type":{"type":"string","description":"discovery type"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"discovery_args":{"properties":{"group_name":{"type":"string","description":"group name"},"namespace_id":{"type":"string","description":"namespace id"}},"type":"object"},"pass_host":{"default":"pass","type":"string","enum":["pass","node","rewrite"],"description":"mod of host passing"},"nodes":{"anyOf":[{"patternProperties":{".*":{"minimum":0,"type":"integer","description":"weight of node"}},"type":"object"},{"items":{"type":"object","properties":{"priority":{"default":0,"type":"integer","description":"priority of node"},"port":{"minimum":1,"type":"integer","description":"port of node"},"weight":{"minimum":0,"type":"integer","description":"weight of node"},"metadata":{"type":"object","description":"metadata of node"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"required":["host","port","weight"]},"type":"array"}]},"service_name":{"maxLength":256,"type":"string","minLength":1},"checks":{"type":"object","properties":{"active":{"properties":{"req_headers":{"type":"array","minItems":1,"items":{"uniqueItems":true,"type":"string"}},"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"port":{"minimum":1,"type":"integer","maximum":65535},"healthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,302],"items":{"minimum":200,"type":"integer","maximum":599}},"successes":{"minimum":1,"type":"integer","default":2,"maximum":254}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"\/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"unhealthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_failures":{"minimum":1,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,404,500,501,502,503,504,505],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":1,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":1,"type":"integer","default":3,"maximum":254}},"type":"object"},"timeout":{"default":1,"type":"number"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"type":"object"},"passive":{"default":{"type":"http","healthy":{"successes":0,"http_statuses":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]},"unhealthy":{"http_failures":0,"http_statuses":[429,500,503],"tcp_failures":0,"timeouts":0}},"type":"object","properties":{"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"healthy":{"properties":{"successes":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"items":{"minimum":200,"type":"integer","maximum":599}}},"type":"object"},"unhealthy":{"properties":{"http_failures":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,500,503],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":0,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":0,"type":"integer","default":7,"maximum":254}},"type":"object"}}}},"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"timeout":{"type":"object","properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"]},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"name":{"maxLength":100,"type":"string","minLength":1},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"update_time":{"type":"integer"},"keepalive_pool":{"properties":{"requests":{"default":1000,"type":"integer","minimum":1},"idle_timeout":{"default":60,"type":"number","minimum":0},"size":{"default":320,"type":"integer","minimum":1}},"type":"object"},"hash_on":{"default":"vars","type":"string","enum":["vars","header","cookie","consumer","vars_combinations"]}}},"update_time":{"type":"integer"},"remote_addr":{"type":"string","description":"client IP","anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]},"status":{"default":1,"type":"integer","enum":[1,0],"description":"route status, 1 to enable, 0 to disable"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"service_protocol":{"enum":["grpc","http"]},"create_time":{"type":"integer"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"desc":{"maxLength":256,"type":"string"},"uri":{"maxLength":4096,"type":"string","minLength":1},"service_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"plugin_config_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"plugins":{"type":"object"},"name":{"maxLength":100,"type":"string","minLength":1},"timeout":{"type":"object","properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"]},"script":{"maxLength":102400,"type":"string","minLength":10},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"priority":{"default":0,"type":"integer"},"uris":{"uniqueItems":true,"type":"array","minItems":1,"items":{"type":"string","description":"HTTP uri"}},"vars":{"type":"array"},"methods":{"type":"array","uniqueItems":true,"items":{"type":"string","enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"],"description":"HTTP method"}},"hosts":{"uniqueItems":true,"type":"array","minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"remote_addrs":{"uniqueItems":true,"type":"array","minItems":1,"items":{"type":"string","description":"client IP","anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}}},"anyOf":[{"required":["plugins","uri"]},{"required":["upstream","uri"]},{"required":["upstream_id","uri"]},{"required":["service_id","uri"]},{"required":["plugins","uris"]},{"required":["upstream","uris"]},{"required":["upstream_id","uris"]},{"required":["service_id","uris"]},{"required":["script","uri"]},{"required":["script","uris"]}]},"upstream":{"oneOf":[{"required":["type","nodes"]},{"required":["type","service_name","discovery_type"]}],"type":"object","properties":{"tls":{"type":"object","properties":{"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"required":["client_cert","client_key"]},"type":{"type":"string","description":"algorithms of load balancing"},"scheme":{"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc\/grpcs\/http\/https. For L4 proxy, it can be one of tcp\/tls\/udp.","enum":["grpc","grpcs","http","https","tcp","tls","udp"]},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"discovery_type":{"type":"string","description":"discovery type"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"discovery_args":{"properties":{"group_name":{"type":"string","description":"group name"},"namespace_id":{"type":"string","description":"namespace id"}},"type":"object"},"pass_host":{"default":"pass","type":"string","enum":["pass","node","rewrite"],"description":"mod of host passing"},"nodes":{"anyOf":[{"patternProperties":{".*":{"minimum":0,"type":"integer","description":"weight of node"}},"type":"object"},{"items":{"type":"object","properties":{"priority":{"default":0,"type":"integer","description":"priority of node"},"port":{"minimum":1,"type":"integer","description":"port of node"},"weight":{"minimum":0,"type":"integer","description":"weight of node"},"metadata":{"type":"object","description":"metadata of node"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"required":["host","port","weight"]},"type":"array"}]},"service_name":{"maxLength":256,"type":"string","minLength":1},"checks":{"type":"object","properties":{"active":{"properties":{"req_headers":{"type":"array","minItems":1,"items":{"uniqueItems":true,"type":"string"}},"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"port":{"minimum":1,"type":"integer","maximum":65535},"healthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,302],"items":{"minimum":200,"type":"integer","maximum":599}},"successes":{"minimum":1,"type":"integer","default":2,"maximum":254}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"\/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"unhealthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_failures":{"minimum":1,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,404,500,501,502,503,504,505],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":1,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":1,"type":"integer","default":3,"maximum":254}},"type":"object"},"timeout":{"default":1,"type":"number"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"type":"object"},"passive":{"default":{"type":"http","healthy":{"successes":0,"http_statuses":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]},"unhealthy":{"http_failures":0,"http_statuses":[429,500,503],"tcp_failures":0,"timeouts":0}},"type":"object","properties":{"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"healthy":{"properties":{"successes":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"items":{"minimum":200,"type":"integer","maximum":599}}},"type":"object"},"unhealthy":{"properties":{"http_failures":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,500,503],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":0,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":0,"type":"integer","default":7,"maximum":254}},"type":"object"}}}},"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"timeout":{"type":"object","properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"]},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"name":{"maxLength":100,"type":"string","minLength":1},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"update_time":{"type":"integer"},"keepalive_pool":{"properties":{"requests":{"default":1000,"type":"integer","minimum":1},"idle_timeout":{"default":60,"type":"number","minimum":0},"size":{"default":320,"type":"integer","minimum":1}},"type":"object"},"hash_on":{"default":"vars","type":"string","enum":["vars","header","cookie","consumer","vars_combinations"]}}},"service":{"properties":{"plugins":{"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"upstream":{"oneOf":[{"required":["type","nodes"]},{"required":["type","service_name","discovery_type"]}],"type":"object","properties":{"tls":{"type":"object","properties":{"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"required":["client_cert","client_key"]},"type":{"type":"string","description":"algorithms of load balancing"},"scheme":{"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc\/grpcs\/http\/https. For L4 proxy, it can be one of tcp\/tls\/udp.","enum":["grpc","grpcs","http","https","tcp","tls","udp"]},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"discovery_type":{"type":"string","description":"discovery type"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"discovery_args":{"properties":{"group_name":{"type":"string","description":"group name"},"namespace_id":{"type":"string","description":"namespace id"}},"type":"object"},"pass_host":{"default":"pass","type":"string","enum":["pass","node","rewrite"],"description":"mod of host passing"},"nodes":{"anyOf":[{"patternProperties":{".*":{"minimum":0,"type":"integer","description":"weight of node"}},"type":"object"},{"items":{"type":"object","properties":{"priority":{"default":0,"type":"integer","description":"priority of node"},"port":{"minimum":1,"type":"integer","description":"port of node"},"weight":{"minimum":0,"type":"integer","description":"weight of node"},"metadata":{"type":"object","description":"metadata of node"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"required":["host","port","weight"]},"type":"array"}]},"service_name":{"maxLength":256,"type":"string","minLength":1},"checks":{"type":"object","properties":{"active":{"properties":{"req_headers":{"type":"array","minItems":1,"items":{"uniqueItems":true,"type":"string"}},"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"port":{"minimum":1,"type":"integer","maximum":65535},"healthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,302],"items":{"minimum":200,"type":"integer","maximum":599}},"successes":{"minimum":1,"type":"integer","default":2,"maximum":254}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"\/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"unhealthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_failures":{"minimum":1,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,404,500,501,502,503,504,505],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":1,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":1,"type":"integer","default":3,"maximum":254}},"type":"object"},"timeout":{"default":1,"type":"number"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"type":"object"},"passive":{"default":{"type":"http","healthy":{"successes":0,"http_statuses":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]},"unhealthy":{"http_failures":0,"http_statuses":[429,500,503],"tcp_failures":0,"timeouts":0}},"type":"object","properties":{"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"healthy":{"properties":{"successes":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"items":{"minimum":200,"type":"integer","maximum":599}}},"type":"object"},"unhealthy":{"properties":{"http_failures":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,500,503],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":0,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":0,"type":"integer","default":7,"maximum":254}},"type":"object"}}}},"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"timeout":{"type":"object","properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"]},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"name":{"maxLength":100,"type":"string","minLength":1},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"update_time":{"type":"integer"},"keepalive_pool":{"properties":{"requests":{"default":1000,"type":"integer","minimum":1},"idle_timeout":{"default":60,"type":"number","minimum":0},"size":{"default":320,"type":"integer","minimum":1}},"type":"object"},"hash_on":{"default":"vars","type":"string","enum":["vars","header","cookie","consumer","vars_combinations"]}}},"update_time":{"type":"integer"},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"script":{"maxLength":102400,"type":"string","minLength":10},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"hosts":{"uniqueItems":true,"type":"array","minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"name":{"maxLength":100,"type":"string","minLength":1}},"type":"object"},"upstream_hash_header_schema":{"pattern":"^[a-zA-Z0-9-_]+$","type":"string"},"stream_route":{"properties":{"desc":{"maxLength":256,"type":"string"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"server_port":{"type":"integer","description":"server port"},"update_time":{"type":"integer"},"remote_addr":{"type":"string","description":"client IP","anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]},"sni":{"type":"string","description":"server name indication","pattern":"^\\*?[0-9a-zA-Z-._]+$"},"upstream_id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"protocol":{"type":"object","properties":{"conf":{"type":"object","description":"protocol-specific configuration"},"name":{"type":"string"}},"required":["name"]},"plugins":{"type":"object"},"upstream":{"oneOf":[{"required":["type","nodes"]},{"required":["type","service_name","discovery_type"]}],"type":"object","properties":{"tls":{"type":"object","properties":{"client_key":{"maxLength":65536,"type":"string","minLength":128},"client_cert":{"maxLength":65536,"type":"string","minLength":128}},"required":["client_cert","client_key"]},"type":{"type":"string","description":"algorithms of load balancing"},"scheme":{"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc\/grpcs\/http\/https. For L4 proxy, it can be one of tcp\/tls\/udp.","enum":["grpc","grpcs","http","https","tcp","tls","udp"]},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"discovery_type":{"type":"string","description":"discovery type"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"discovery_args":{"properties":{"group_name":{"type":"string","description":"group name"},"namespace_id":{"type":"string","description":"namespace id"}},"type":"object"},"pass_host":{"default":"pass","type":"string","enum":["pass","node","rewrite"],"description":"mod of host passing"},"nodes":{"anyOf":[{"patternProperties":{".*":{"minimum":0,"type":"integer","description":"weight of node"}},"type":"object"},{"items":{"type":"object","properties":{"priority":{"default":0,"type":"integer","description":"priority of node"},"port":{"minimum":1,"type":"integer","description":"port of node"},"weight":{"minimum":0,"type":"integer","description":"weight of node"},"metadata":{"type":"object","description":"metadata of node"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"required":["host","port","weight"]},"type":"array"}]},"service_name":{"maxLength":256,"type":"string","minLength":1},"checks":{"type":"object","properties":{"active":{"properties":{"req_headers":{"type":"array","minItems":1,"items":{"uniqueItems":true,"type":"string"}},"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"port":{"minimum":1,"type":"integer","maximum":65535},"healthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,302],"items":{"minimum":200,"type":"integer","maximum":599}},"successes":{"minimum":1,"type":"integer","default":2,"maximum":254}},"type":"object"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"\/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"unhealthy":{"properties":{"interval":{"minimum":1,"type":"integer","default":1},"http_failures":{"minimum":1,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,404,500,501,502,503,504,505],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":1,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":1,"type":"integer","default":3,"maximum":254}},"type":"object"},"timeout":{"default":1,"type":"number"},"host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"type":"object"},"passive":{"default":{"type":"http","healthy":{"successes":0,"http_statuses":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]},"unhealthy":{"http_failures":0,"http_statuses":[429,500,503],"tcp_failures":0,"timeouts":0}},"type":"object","properties":{"type":{"default":"http","type":"string","enum":["http","https","tcp"]},"healthy":{"properties":{"successes":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308],"items":{"minimum":200,"type":"integer","maximum":599}}},"type":"object"},"unhealthy":{"properties":{"http_failures":{"minimum":0,"type":"integer","default":5,"maximum":254},"http_statuses":{"type":"array","minItems":1,"uniqueItems":true,"default":[429,500,503],"items":{"minimum":200,"type":"integer","maximum":599}},"tcp_failures":{"minimum":0,"type":"integer","default":2,"maximum":254},"timeouts":{"minimum":0,"type":"integer","default":7,"maximum":254}},"type":"object"}}}},"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"timeout":{"type":"object","properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}},"required":["connect","send","read"]},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"name":{"maxLength":100,"type":"string","minLength":1},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"update_time":{"type":"integer"},"keepalive_pool":{"properties":{"requests":{"default":1000,"type":"integer","minimum":1},"idle_timeout":{"default":60,"type":"number","minimum":0},"size":{"default":320,"type":"integer","minimum":1}},"type":"object"},"hash_on":{"default":"vars","type":"string","enum":["vars","header","cookie","consumer","vars_combinations"]}}},"create_time":{"type":"integer"},"server_addr":{"type":"string","description":"server IP","anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}},"type":"object"},"proto":{"type":"object","properties":{"desc":{"maxLength":256,"type":"string"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"content":{"maxLength":1048576,"type":"string","minLength":1},"update_time":{"type":"integer"},"create_time":{"type":"integer"}},"required":["content"]},"global_rule":{"type":"object","properties":{"plugins":{"type":"object"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"update_time":{"type":"integer"},"create_time":{"type":"integer"}},"required":["plugins"]},"plugin_config":{"type":"object","properties":{"desc":{"maxLength":256,"type":"string"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"plugins":{"type":"object"},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"}},"required":["id","plugins"]},"ssl":{"oneOf":[{"required":["sni","key","cert"]},{"required":["snis","key","cert"]}],"type":"object","properties":{"cert":{"maxLength":65536,"type":"string","minLength":128},"validity_end":{"type":"integer"},"create_time":{"type":"integer"},"keys":{"items":{"maxLength":65536,"type":"string","minLength":128},"type":"array"},"id":{"anyOf":[{"maxLength":64,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1},{"minimum":1,"type":"integer"}]},"update_time":{"type":"integer"},"snis":{"type":"array","minItems":1,"items":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"}},"sni":{"pattern":"^\\*?[0-9a-zA-Z-._]+$","type":"string"},"key":{"maxLength":65536,"type":"string","minLength":128},"exptime":{"minimum":1588262400,"type":"integer"},"client":{"type":"object","properties":{"depth":{"minimum":0,"type":"integer","default":1},"ca":{"maxLength":65536,"type":"string","minLength":128}},"required":["ca"]},"validity_start":{"type":"integer"},"labels":{"type":"object","patternProperties":{".*":{"type":"string","pattern":"^\\S+$","maxLength":64,"description":"value of label","minLength":1}},"description":"key\/value pairs to specify attributes"},"status":{"default":1,"type":"integer","enum":[1,0],"description":"ssl status, 1 to enable, 0 to disable"},"certs":{"items":{"maxLength":65536,"type":"string","minLength":128},"type":"array"}}}},"stream_plugins":{"mqtt-proxy":{"schema":{"required":["protocol_name","protocol_level"],"type":"object","properties":{"protocol_name":{"type":"string"},"protocol_level":{"type":"integer"},"disable":{"type":"boolean"},"upstream":{"oneOf":[{"required":["host","port"]},{"required":["ip","port"]}],"type":"object","properties":{"ip":{"type":"string"},"port":{"type":"number"},"host":{"type":"string"}},"description":"Deprecated. We should configure upstream outside of the plugin"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1000,"version":0.1},"ip-restriction":{"schema":{"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object","properties":{"disable":{"type":"boolean"},"whitelist":{"type":"array","minItems":1,"items":{"anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}},"message":{"maxLength":1024,"type":"string","default":"Your IP address is not allowed","minLength":1},"blacklist":{"type":"array","minItems":1,"items":{"anyOf":[{"format":"ipv4","type":"string","title":"IPv4"},{"type":"string","title":"IPv4\/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([12]?[0-9]|3[0-2])$"},{"format":"ipv6","type":"string","title":"IPv6"},{"type":"string","title":"IPv6\/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?\/[0-9]{1,3}$"}]}}},"$comment":"this is a mark for our injected plugin schema"},"priority":3000,"version":0.1},"limit-conn":{"schema":{"required":["conn","burst","default_conn_delay","key"],"type":"object","properties":{"conn":{"exclusiveMinimum":0,"type":"integer"},"disable":{"type":"boolean"},"burst":{"minimum":0,"type":"integer"},"key_type":{"default":"var","type":"string","enum":["var","var_combination"]},"default_conn_delay":{"exclusiveMinimum":0,"type":"number"},"only_use_default_delay":{"default":false,"type":"boolean"},"key":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema"},"priority":1003,"version":0.1}}}
